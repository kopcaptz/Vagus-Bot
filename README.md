# Vagus Bot

–ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç —Å AI –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ Node.js.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**
  - OpenAI (GPT-4, GPT-3.5 Turbo)
  - Anthropic (Claude)
  - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  
- üì± **Telegram –±–æ—Ç** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot API
  - –ö–æ–º–∞–Ω–¥—ã: `/start`, `/help`, `/model`, `/history`, `/echo`
  
- üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite**
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
  - –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
  
- üß† **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ AI
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω–∞–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üß† **–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Memory v2)**
  - profile / working / archive, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å decay, pre-retrieval –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞.
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: memory_save, memory_read, memory_search, memory_get, memory_forget, memory_update.
  - –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/memory.md](docs/memory.md).
  
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –í—ã–±–æ—Ä AI –º–æ–¥–µ–ª–µ–π
  - –¢–µ—Å—Ç AI –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏
  - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —á–∞—Ç–∞
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º Telegram)
  - –î–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

## üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–ª—é—á–∏:
```bash
cp .env.example .env
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
docker compose up -d
```

3. –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://localhost:3000`

4. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
docker compose logs -f        # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose restart         # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose down            # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose up -d --build   # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

5. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ:
   - `./data/` ‚Äî –ë–î (SQLite) –∏ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
   - `./workspace/` ‚Äî —Ñ–∞–π–ª—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –±–æ—Ç–æ–º

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–±–µ–∑ Docker)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 22.0.0
- npm

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm install
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `.env.example`):

```bash
cp .env.example .env
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```env
# Telegram Bot Token (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather –≤ Telegram
# TELEGRAM_BOT_TOKEN=your_bot_token_here

# –ü–æ—Ä—Ç –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
PORT=3000

# –•–æ—Å—Ç (0.0.0.0 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ —Å–µ—Ç–∏, localhost —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ)
HOST=0.0.0.0

# OpenAI API –∫–ª—é—á (–ø–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://platform.openai.com/account/api-keys)
OPENAI_API_KEY=your_openai_key_here

# Anthropic API –∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ANTHROPIC_API_KEY=your_anthropic_key_here
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π):

```bash
npm run dev
```

### –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ:

```bash
npm run build
npm start
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
npx tsx test-db.js
```

### –ë–µ–∑ Telegram –±–æ—Ç–∞

–ë–æ—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram:

1. –ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ `.env`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç: `npm run dev`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:3000
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ü–∏—é "–¢–µ—Å—Ç AI" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã

## üåê –î–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:

1. –£–∑–Ω–∞–π—Ç–µ IP –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
   - Windows: `ipconfig` (–∏—â–∏—Ç–µ IPv4 Address)
   - Linux/Mac: `ifconfig` –∏–ª–∏ `ip addr`

2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
   ```
   http://<–≤–∞—à-ip>:3000
   ```

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω **—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø**, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `.env`:
```env
HOST=localhost
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI –º–æ–¥–µ–ª–µ–π

### OpenAI (GPT-4, GPT-3.5)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://platform.openai.com
2. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ —Ä–∞–∑–¥–µ–ª–µ API Keys
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env`:
   ```env
   OPENAI_API_KEY=sk-proj-...
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
5. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–í–∞–∂–Ω–æ:** –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-` –∏–ª–∏ `sk-proj-`

### Anthropic (Claude)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://console.anthropic.com
2. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env`:
   ```env
   ANTHROPIC_API_KEY=sk-ant-...
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
5. –í—ã–±–µ—Ä–∏—Ç–µ "Anthropic Claude" –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
simple-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.ts         # AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (OpenAI, Anthropic)
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers.ts       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLite –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queries.ts        # SQL –∑–∞–ø—Ä–æ—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø—ã –¥–ª—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts            # API endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web.ts            # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ index.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.html            # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ app.js                # Frontend JavaScript
‚îÇ   ‚îî‚îÄ‚îÄ style.css             # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ bot.db                # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ .env                       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ test-api.js               # –¢–µ—Å—Ç OpenAI API
‚îî‚îÄ‚îÄ test-db.js                # –¢–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

## üîå API Endpoints

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/stats` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–æ—Ç–∞

### AI –º–æ–¥–µ–ª–∏
- `GET /api/models` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- `POST /api/models/select` - –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å
  ```json
  { "model": "openai-gpt-4" }
  ```
- `POST /api/ai/test` - –¢–µ—Å—Ç AI –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω chatId)
  ```json
  { "message": "–ü—Ä–∏–≤–µ—Ç!", "chatId": "123456" }
  ```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `GET /api/history/:chatId?limit=50` - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —á–∞—Ç–∞
- `GET /api/database/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î
- `GET /api/users` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/sessions` - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å
- `GET /api/context/config` - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `POST /api/context/config` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  ```json
  {
    "enabled": true,
    "maxMessages": 10,
    "maxTokens": 2000,
    "includeSystemPrompt": true
  }
  ```
- `GET /api/context/:chatId?message=—Ç–µ–∫—Å—Ç` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —á–∞—Ç–∞

### Telegram (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞)
- `POST /api/send` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
  ```json
  { "chatId": "123456", "message": "–ü—Ä–∏–≤–µ—Ç!" }
  ```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:

### –¢–∞–±–ª–∏—Ü—ã

1. **messages** - –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - ID, message_id, chat_id, user_id
   - username, message_text
   - is_bot, ai_model, ai_provider
   - created_at

2. **users** - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - user_id, username
   - first_name, last_name
   - created_at, last_seen
   - message_count

3. **sessions** - –°–µ—Å—Å–∏–∏ —á–∞—Ç–æ–≤
   - session_id, chat_id, user_id
   - created_at, last_message_at
   - message_count

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Å–µ–∫—Ü–∏–∏ "üìú –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π"
3. –í–≤–µ–¥–∏—Ç–µ Chat ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `test_chat_456` –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"

## üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å

–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç AI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –±–æ–ª–µ–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
3. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç, –ø–æ–Ω—è—Ç–Ω—ã–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–æ–∫–µ–Ω–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å–µ–∫—Ü–∏–∏ "üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å":

- **–í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π**: –°–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
- **–ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω–∞–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2000)
- **–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç**: –í–∫–ª—é—á–∞—Ç—å –ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç—É:
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω
   –ë–æ—Ç: –ü—Ä–∏–≤–µ—Ç, –ò–≤–∞–Ω!
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ø –∏–∑—É—á–∞—é Python
   –ë–æ—Ç: –û—Ç–ª–∏—á–Ω–æ! Python - —Ö–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä.
   ```

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å, —Ç—Ä–µ–±—É—é—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫?
   ```

3. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç, —É—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –≤—ã –∏–∑—É—á–∞–µ—Ç–µ Python, –∏ –¥–∞—Å—Ç –æ—Ç–≤–µ—Ç –Ω–∞ Python, –∞ –Ω–µ –Ω–∞ –¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ.

### –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ü–∏—é "üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å"
2. –í–≤–µ–¥–∏—Ç–µ Chat ID –≤ –ø–æ–ª–µ "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å"
4. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ AI

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npx tsx test-context.js
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –∏ –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
npx tsx test-db.js
```
–°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

### –¢–µ—Å—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏
```bash
npx tsx test-context.js
```
–°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–±–æ—Ç—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏.

### –¢–µ—Å—Ç OpenAI API
```bash
node test-api.js
```
–ü—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OpenAI API.

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ü–∏—é "–¢–µ—Å—Ç AI" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –í–≤–µ–¥–∏—Ç–µ Chat ID `test_chat_456` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π AI –º–æ–¥–µ–ª–∏

1. –û–±–Ω–æ–≤–∏—Ç–µ `src/config/config.ts`:
   ```typescript
   export type AIModel = '...' | 'new-model';
   ```

2. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `src/ai/models.ts`:
   ```typescript
   case 'new-provider':
     return await processWithNewProvider(message, modelConfig);
   ```

3. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `public/index.html`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/bot/handlers.ts`:
```typescript
if (message.startsWith('/mycommand')) {
  const responseText = '–û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É';
  await ctx.reply(responseText);
  saveMessage({ ... });
  return;
}
```

## üìù –ö–æ–º–∞–Ω–¥—ã Telegram –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
- `/model` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é AI –º–æ–¥–µ–ª—å
- `/history` - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
- `/echo <—Ç–µ–∫—Å—Ç>` - –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

- `TELEGRAM_BOT_TOKEN` - –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `TELEGRAM_OWNER` - –•–æ–∑—è–∏–Ω –±–æ—Ç–∞ (user_id –∏–ª–∏ @username). –¢–æ–ª—å–∫–æ –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç; –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –≥–æ—Å—Ç–∏
- `TELEGRAM_GUEST_MODE` - –†–µ–∂–∏–º –¥–ª—è –≥–æ—Å—Ç–µ–π: `block` (–æ—Ç–∫–∞–∑) –∏–ª–∏ `greeting` (–∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ)
- `TELEGRAM_GUEST_MESSAGE` - –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≥–æ—Å—Ç–µ–π –ø—Ä–∏ —Ä–µ–∂–∏–º–µ `greeting`
- `PORT` - –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3000)
- `HOST` - –•–æ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞ (0.0.0.0 –¥–ª—è —Å–µ—Ç–∏, localhost –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ)
- `OPENAI_API_KEY` - OpenAI API –∫–ª—é—á
- `ANTHROPIC_API_KEY` - Anthropic API –∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç
```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# Linux/Mac
lsof -i :3000
kill -9 <PID>
```

### –û—à–∏–±–∫–∞ "API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `better-sqlite3`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Vagus Bot - –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –±–æ—Ç –¥–ª—è –≤–∞—à–∏—Ö –Ω—É–∂–¥.
